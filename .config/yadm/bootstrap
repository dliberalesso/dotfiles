#!/bin/zsh

git clone https://github.com/zdharma/zinit.git "$HOME/.config/zsh/.zinit/bin"
source "$HOME/.zshenv"
source "$HOME/.config/zsh"/.zprofile"
source "$HOME/.config/zsh/.zshrc"

# sparse checkout
yadm gitconfig core.sparseCheckout true

cat << EOF > "$HOME/.config/yadm/repo.git/info/sparse-checkout"
# generated by $0
/*
!README.md
EOF

mkdir -p "$HOME/.local/share/nvim/undodir"

cd "$HOME/.config/coc/extensions"
yarn install --frozen-lockfile
cd "$HOME"

git clone https://github.com/kristijanhusak/vim-packager "$HOME/.config/nvim/pack/packager/opt/vim-packager"
nvim +PackagerInstall +PackagerUpdate +CocInstall +CocUpdateSync +CocRebuild +qall

yadm checkout --quiet

rm .zcompdump .yarnrc .nvimlog yadm
