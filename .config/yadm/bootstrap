#!/bin/zsh

echo "Cloning zinit and vim-packager"
git clone https://github.com/zdharma/zinit.git "$HOME/.config/zsh/.zinit/bin"
git clone https://github.com/kristijanhusak/vim-packager "$HOME/.config/nvim/pack/packager/opt/vim-packager"

echo "Doing sparse checkout"
./yadm gitconfig core.sparseCheckout true

cat << EOF > "$HOME/.config/yadm/repo.git/info/sparse-checkout"
# generated by $0
/*
!README.md
!atclone_atpull
EOF

./yadm checkout --quiet

echo "Creating nvim's undodir"
mkdir -p "$HOME/.local/share/nvim/undodir"

echo "Deleting leftovers"
rm .zcompdump yadm
